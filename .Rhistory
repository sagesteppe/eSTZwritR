title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
ggplot2::sec.axis = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)'#,
#  ggplot2::sec.axis = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) +
ggplot2::scale_x_continuous(
'Annual Precipitation (mm)',
ggplot2::sec.axis = ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)")
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)'#,
#  ggplot2::sec.axis = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) +
ggplot2::scale_x_continuous(
'Annual Precipitation (mm)',
ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)")
)
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) +
ggplot2::scale_x_continuous(
'Annual Precipitation (mm)',
ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)")
)
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) +
ggplot2::scale_x_continuous(
'Annual Precipitation (mm)',
ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)")
)
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() #+
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
)
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) +
ggplot2::scale_x_continuous(
'Annual Precipitation (mm)',
ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)")
)
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
sec.axis  =ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) +
ggplot2::scale_x_continuous(
'Annual Precipitation (mm)',
ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)")
)
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
sec.axis  = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) +
ggplot2::scale_x_continuous(
'Annual Precipitation (mm)',
ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)")
)
library(ggplot2)
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
sec.axis  = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) +
ggplot2::scale_x_continuous(
'Annual Precipitation (mm)',
ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)")
)
library(ggplot2)
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
sec.axis  = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) #+
SZplot
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
sec.axis  = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) +
ggplot2::scale_x_continuous(
'Annual Precipitation (mm)',
ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)")  )
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
sec.axis  = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) +
ggplot2::scale_x_continuous(
'Annual Precipitation (mm)',
sec.axis  =  ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)") )
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
# ggplot2::scale_y_continuous(
#    'Mean Annual Temperature (C\u00B0)',
#    sec.axis  = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
#  ) +
ggplot2::scale_x_continuous(
'Annual Precipitation (mm)',
sec.axis  =  ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)") )
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
sec.axis  = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) #+
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() #+
SZplot
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
sec.axis  = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) +
ggplot2::scale_x_continuous(
'Annual Precipitation (mm)',
sec.axis  =  ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)") )
SZplot
SZplot
View(pts)
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
ggplot2::sec.axis  = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
SZplot
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
ggplot2::sec.axis = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
#'
#'
SZplot <- ggplot2::ggplot() +
ggplot2::geom_point(data = pts,
ggplot2::aes(
x = meanAP,
y = meanMAT,
color = Zone) ) +
ggplot2::labs(
title = 'Relationship between Temperature and Precipitation across Seed Zones',
color = 'Seed Zone',
caption = 'Source: PRISM 1990-2020 climate normals') +
ggplot2::theme_classic() +
ggplot2::scale_y_continuous(
'Mean Annual Temperature (C\u00B0)',
sec.axis = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
) +
ggplot2::scale_x_continuous(
'Annual Precipitation (mm)',
sec.axis  =  ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)") )
#'
#'  ggplot2::scale_y_continuous(
#'    'Mean Annual Temperature (C\u00B0)',
#'    ggplot2::sec.axis = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
#'  ) +
#'  ggplot2::scale_x_continuous(
#'    'Annual Precipitation (mm)',
#'    ggplot2::sec.axis = ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)")
#'  )
#' @export
orderZones <- function(x, SeedZone, n, ...){
if(missing(n)){n <- 2500}
precip <- terra::rast(system.file("extdata", "/PRISM_ann_ppt.tif", package="eSTZwritR"))
temp <- terra::rast(system.file("extdata", "/PRISM_ann_temp.tif", package="eSTZwritR"))
names(precip) <- 'AnnualPrecipitation' ; names(temp) <- 'MeanAnnualTemp' ;
x <- dplyr::select(x, SeedZone = SeedZone)
pts <- sf::st_sample(x, size = n, ...) |>
sf::st_as_sf()
pts <- sf::st_intersection(x, pts) |>
sf::st_transform(terra::crs(precip))
pts <- terra::extract(precip, terra::vect(pts), bind = TRUE, na.rm = TRUE)
pts <- terra::extract(temp, pts, bind = TRUE, na.rm = TRUE)|>
sf::st_as_sf()
values <- data.frame(
Zone = x$SeedZone,
AnnualPrecipitation = scales::rescale(pts$AnnualPrecipitation),
MeanAnnualTemp = scales::rescale(pts$MeanAnnualTemp)
) |>
dplyr::group_by(Zone)|>
dplyr::summarise(
meanAP = mean(AnnualPrecipitation),
meanMAT = mean(MeanAnnualTemp)
)
return(values)
}
nc <- sf::st_read(system.file("shape/nc.shp", package="sf")) |>
dplyr::slice_head(n = 10)
#'
pts <- orderZones(nc, SeedZone = 'NAME', n = 100)
nc <- sf::st_read(system.file("shape/nc.shp", package="sf")) |>
dplyr::slice_head(n = 10)
#'
pts <- orderZones(nc, SeedZone = 'NAME', n = 100)
#'
pts <- orderZones(nc, SeedZone = 'NAME', n = 100)
#'
#'  ggplot2::scale_y_continuous(
#'    'Mean Annual Temperature (C\u00B0)',
#'    ggplot2::sec.axis = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
#'  ) +
#'  ggplot2::scale_x_continuous(
#'    'Annual Precipitation (mm)',
#'    ggplot2::sec.axis = ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)")
#'  )
#' @export
orderZones <- function(x, SeedZone, n, ...){
if(missing(n)){n <- 2500}
precip <- terra::rast(system.file("extdata", "/PRISM_ann_ppt.tif", package="eSTZwritR"))
temp <- terra::rast(system.file("extdata", "/PRISM_ann_temp.tif", package="eSTZwritR"))
names(precip) <- 'AnnualPrecipitation' ; names(temp) <- 'MeanAnnualTemp' ;
x <- dplyr::select(x, SeedZone = SeedZone)
pts <- sf::st_sample(x, size = n, ...) |>
sf::st_as_sf()
pts <- sf::st_intersection(x, pts) |>
sf::st_transform(terra::crs(precip))
pts <- terra::extract(precip, terra::vect(pts), bind = TRUE, na.rm = TRUE)
pts <- terra::extract(temp, pts, bind = TRUE, na.rm = TRUE)|>
sf::st_as_sf()
values <- data.frame(
Zone = x$SeedZone,
AnnualPrecipitation = scales::rescale(pts$AnnualPrecipitation),
MeanAnnualTemp = scales::rescale(pts$MeanAnnualTemp)
) |>
dplyr::group_by(Zone)|>
dplyr::summarise(
meanAP = mean(AnnualPrecipitation),
meanMAT = mean(MeanAnnualTemp)
)
return(values)
}
nc <- sf::st_read(system.file("shape/nc.shp", package="sf")) |>
dplyr::slice_head(n = 10)
nc <- sf::st_read(system.file("shape/nc.shp", package="sf"), quiet = TRUE) |>
dplyr::slice_head(n = 10)
#'
pts <- orderZones(nc, SeedZone = 'NAME', n = 100)
orderZones
#'
#'  ggplot2::scale_y_continuous(
#'    'Mean Annual Temperature (C\u00B0)',
#'    ggplot2::sec.axis = ggplot2::sec_axis( ~ (. * 9/5) + 32, name = "MAT (F\u00B0)")
#'  ) +
#'  ggplot2::scale_x_continuous(
#'    'Annual Precipitation (mm)',
#'    ggplot2::sec.axis = ggplot2::sec_axis( ~ . * 0.0393701, name = "AP (inches)")
#'  )
#' @export
orderZones <- function(x, SeedZone, n, ...){
if(missing(n)){n <- 2500}
precip <- terra::rast(system.file("extdata", "/PRISM_ann_ppt.tif", package="eSTZwritR"))
temp <- terra::rast(system.file("extdata", "/PRISM_ann_temp.tif", package="eSTZwritR"))
names(precip) <- 'AnnualPrecipitation' ; names(temp) <- 'MeanAnnualTemp' ;
x <- dplyr::select(x, SeedZone = SeedZone)
pts <- sf::st_sample(x, size = n, ...) |>
sf::st_as_sf()
pts <- sf::st_intersection(x, pts) |>
sf::st_transform(terra::crs(precip))
pts <- terra::extract(precip, terra::vect(pts), bind = TRUE, na.rm = TRUE)
pts <- terra::extract(temp, pts, bind = TRUE, na.rm = TRUE)|>
sf::st_as_sf()
values <- data.frame(
Zone = x$SeedZone,
AnnualPrecipitation = scales::rescale(pts$AnnualPrecipitation),
MeanAnnualTemp = scales::rescale(pts$MeanAnnualTemp)
) |>
dplyr::group_by(Zone)|>
dplyr::summarise(
meanAP = mean(AnnualPrecipitation),
meanMAT = mean(MeanAnnualTemp)
)
return(values)
}
terra::rast(system.file("extdata", "/PRISM_ann_ppt.tif", package="eSTZwritR"))
devtools::install_github('sagesteppe/eSTZwritR')
roxygen2::roxygenise()
usethis::use_vignette()
usethis::use_vignette('eSTZwritR')
usethis::build_site()
pkgdown::build_site()
roxygen2::roxygenise()
rcmdcheck::rcmdcheck()
pkgdown::build_site()
sessionINfo()
sessionInfo()
